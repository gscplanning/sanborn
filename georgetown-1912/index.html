<!DOCTYPE html>
<html>
<head>
    <title>Georgetown Sanborn Map, 1912</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    <!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.ie.css" /><![endif]-->

    <link rel="stylesheet" href="css/Control.Opacity.css" />

    <!-- <link rel="stylesheet" href="js/easyPrint.css"/> -->

    <link rel="stylesheet" href="css/leaflet-sidebar.css" />

    <link rel="stylesheet" href="css/jquery-ui-1.10.3.custom.min.css" />

    <link rel="stylesheet" href="css/style.css" />

    <style>
        body {
            padding: 0;
            margin: 0;
        }

        html, body, #map {
            height: 100%;
            font: 10pt "Helvetica Neue", Arial, Helvetica, sans-serif;
        }

        .lorem {
            font-style: italic;
            color: #AAA;
        }
    </style>
</head>
<body>
    <!-- Add a nice responsive sidebar using the sidebar-2 plugin -->
    <!-- https://github.com/turbo87/sidebar-v2/ -->
    <div id="sidebar" class="sidebar collapsed">
        <!-- Nav tabs -->
        <ul class="sidebar-tabs" role="tablist">
            <li><a href="#home" class="sidebar-nav" role="tab"><i class="fa fa-bars"></i></a></li>
            <li><a href="#legend" class="sidebar-nav" role="tab"><i class="fa fa-list-alt"></i></a></li>
            <li><a href="#sources" class="sidebar-nav" role="tab"><i class="fa fa-archive"></i></a></li>
            <!-- <li><a href="#settings" class="sidebar-nav" role="tab"><i class="fa fa-info-circle"></i></a></li> -->
        </ul>

        <!-- Tab panes -->
        <div class="sidebar-content active">
            <div class="sidebar-pane map-navigation" id="home">
                <h1>Georgetown 1912 Sanborn Map</h1>
            
                <h2>Sanborn Maps</h2>
                <p>For map nerds, history buffs, genealogy gurus, and planners, Sanborn maps rank as some of the most revered records of populated places in the US. First created following the Civil War, these maps were developed by the Sanborn Company to help insurance companies calculate liability for fire insurance. However, the level of detail collected has left behind a unique and dense record of the past for the 12,000 communities surveyed.</p>
                <a class="embedly-card" href="http://en.wikipedia.org/wiki/Sanborn_Maps">Sanborn Maps</a>
                <script async src="//cdn.embedly.com/widgets/platform.js" charset="UTF-8"></script>

                <h2>Georgetown, 1912</h2>
                <p>Sanborn carried out surveys and updates of Georgetown  in 1886, 1895, 1901, 1907, and 1912. These can be accessed and downloaded from the <a href="http://kdl.kyvl.org/catalog?q=sanborn+maps+georgetown&amp;search_field=all_fields&amp;f%5Bformat%5D%5B%5D=maps&amp;commit=search">Kentucky Digital Library</a>.</p>

                <p>The map you see here is a combination of the 15+ map sheets from the 1912 survey of Georgetown. Feel free to explore the map on your own. Use the slider or buttons in the top-right corner of the map to change the opacity of the Sanborn map. This will allow you to compare and contrast the 1912 map against 2014 aerial imagery. We've also spotted a few example of places that have stayed and places that have stayed the same. Click the links below to move the map to those locations:</p>
                <h3>Same</h3>
                <ul>
                    <li><a href='' data-zoom='20' data-position='38.210228, -84.559122'>Court House &amp; City Hall</a></li>
                    <li>Thing</li>
                    <li>Other Thing</li>
                </ul>
                <h3>Different</h3>
                <ul>
                    <li><a href='' data-zoom='19' data-position='38.206995, -84.554754'>Georgetown College</a></li>
                    <li>Thing</li>
                    <li>Other thing</li>
                </ul>
                <h2>Moving Forward</h2>
                <p >Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
            </div>
            <div class="sidebar-pane" id="legend">
                <h1>Legend</h1>
                    <img src="img/key.png" alt="map key" class="key"/> 
            </div>
            <div class="sidebar-pane" id="sources"><h1>Sources</h1></div>
            <!-- <div class="sidebar-pane" id="settings"><h1>Settings</h1></div> -->
        </div>
    </div>

    <div id="map" class="sidebar-map"></div>

    <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
    <script src="js/jquery-1.9.1.js"></script>
    <script src="js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="js/Control.Opacity.js"></script>
    <!--<script src="js/leaflet.easyPrint.js"></script>-->
    <script src="js/jQuery.print.js"></script>
    <script src="js/leaflet-sidebar.js"></script>

    <script>
        var map = L.map('map', {
            maxZoom: 21,
            minZoom: 16
        });
        map.setView([38.209985, -84.559826], 16);

        var HERE_satelliteDay = L.tileLayer('http://{s}.{base}.maps.cit.api.here.com/maptile/2.1/maptile/{mapID}/satellite.day/{z}/{x}/{y}/256/png8?app_id=LaVGiK8OFXTbRctQu6Q0&app_code=LZeM-VuB2Q-7GzKMcvVzYg', {
            attribution: 'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',
            subdomains: '1234',
            mapID: 'newest',
            app_id: 'LaVGiK8OFXTbRctQu6Q0',
            app_code: 'LZeM-VuB2Q-7GzKMcvVzYg',
            base: 'aerial',
            maxNativeZoom: 19,
            maxZoom: 21,
           /* Why use maxNativeZoom?
            -HERE satellite.day only goes to z19 (which is still dang good), but we have maxZoom: 20. maxNativeZoom lets us continue to z20 with the tiles from z19!
            -Source: http://gis.stackexchange.com/questions/78843/zoom-further-in-with-leaflet-javascirpt-api
            -LeafletJS API: http://leafletjs.com/reference.html#tilelayer-maxnativezoom */
            minZoom: 16
        }).addTo(map);

        var sanborn = L.tileLayer('../sanborn1912_wgs84/{z}/{x}/{y}.png', {
            maxNativeZoom: 20, 
            maxZoom: 21,
            minZoom: 16,
            attribution: '1912 Sanborn Map Company, <a href="http://libraries.uky.edu/SC" />University of Kentucky Special Collections Research Center</a>'
        }).addTo(map);

        // Add opacity control using Leaflet.OpacityControls plugin
        // https://github.com/lizardtechblog/Leaflet.OpacityControls
        var higherOpacity = new L.Control.higherOpacity();
        map.addControl(higherOpacity);
        var lowerOpacity = new L.Control.lowerOpacity();
        map.addControl(lowerOpacity);
        var opacitySlider = new L.Control.opacitySlider();
        map.addControl(opacitySlider);

        higherOpacity.setOpacityLayer(sanborn);

        sanborn.setOpacity(0.90);

        // This print feature is cool in theory, but not ready for primetime
        // L.easyPrint().addTo(map)

        var sidebar = L.control.sidebar('sidebar').addTo(map);

        document.querySelector('.map-navigation').onclick = function(abc) {
            var pos = abc.target.getAttribute('data-position');
            var zoom = abc.target.getAttribute('data-zoom');
            if (pos && zoom) {
                var locat = pos.split(',');
                var zoo = parseInt(zoom);
            map.setView(locat, zoo, {animation: true});
            return false;
            }
        } 

        // document.getElementById('map-navigation').onclick = function(abc) {
        //     var pos = abc.target.getAttribute('data-position');
        //     var zoom = abc.target.getAttribute('data-zoom');
        //     if (pos && zoom) {
        //         var locat = pos.split(',');
        //         var zoo = parseInt(zoom);
        //         map.setView(locat, zoo, {animation: true});
        //         return false;
        //     }
        // } 

        // document.getElementsByClassName('map-navigation').onclick = function() {
        //     var pos = this.target.getAttribute('data-position');
        //     var zoom = this.target.getAttribute('data-zoom');
        //     if (pos && zoom) {
        //         var locat = pos.split(',');
        //         var zoo = parseInt(zoom);
        //         map.setView(locat, zoo, {animation: true});
        //         return false;
        //     }
        // }  

    </script>
    
    <!-- A little jQuery to keep the URL hash from updating when clicking the nav buttons -->
    <script>
    // event.preventDefault: (http://api.jquery.com/event.preventDefault/)
    // Idea frome Stack Overflow: (http://stackoverflow.com/a/20215413)
    $('.sidebar-nav').click(function(event){
        event.preventDefault();
    });
    </script>

</body>
</html>